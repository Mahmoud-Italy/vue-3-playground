var e=Object.assign;import{p as t,v as n,i as s,u as a,o,c as r,a as l,t as c,T as i,b as u,F as d,d as m,r as p,e as f,f as y,w as b,g as v,h,j as g,k as P,l as x,m as w,n as C,q as k,s as U,x as $,y as N,z as Q,A as E,S as q,B as S,C as j,D as _,E as L,G as R}from"./vendor.ebb8d7af.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const s=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const r=new URL(e,s);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),a(c)},onload(){n(self[t].moduleMap[r]),a(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("assets/");const I=Symbol("version");const M={name:"Header",setup(){const{state:e}=a();return{version:s(I),state:e}}},A={class:"py-5 text-center"},D=l("img",{class:"d-block mx-auto mb-4",src:"./assets/logo.03d6d6da.png",alt:"",width:"72",height:"72"},null,-1),O={class:"lead"},V={class:"mb-1"},B=l("x-username",null,null,-1);M.render=function(e,t,n,s,a,m){return o(),r(d,null,[l("div",A,[D,l("h2",null,"Vue "+c(s.version)+" Playground",1),l("p",O," Below is an example form built with the Vue "+c(s.version)+" Composition API. ",1)]),(o(),r(i,{to:"#footer"},[l("p",V,[u("Â© "+c(s.state.year)+" ",1),B])]))],64)};const T={name:"App",components:{Header:M},setup(){const{dispatch:e}=a();t(I,n),m((()=>{e("onSetYear",(new Date).getFullYear())}))}};T.render=function(e,t,n,s,a,c){const i=p("Header"),u=p("router-view");return o(),r(d,null,[l(i),l(u)],64)};var Y=f({state:{year:"1970"},actions:{onSetYear:({commit:e},t)=>{e("setYear",t)}},mutations:{setYear:(e,t)=>{e.year=t}}});const F={name:"Coupon",props:["percent"],emits:["redeem"],setup(e,{emit:t}){const n=y(e.percent);return{percent:n,useCoupon:()=>t("redeem",n.value)}}},H={class:"card p-2"},G={class:"input-group"},z={class:"input-group-append"};F.render=function(e,t,n,s,a,c){return o(),r("form",H,[l("div",G,[b(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.percent=e),type:"text",class:"form-control",placeholder:"Promo code"},null,512),[[v,s.percent]]),l("div",z,[l("button",{onClick:t[2]||(t[2]=(...e)=>s.useCoupon&&s.useCoupon(...e)),type:"button",class:"btn btn-secondary"},"Redeem")])])])};const J={name:"Item",props:["name","price","quantity"],emits:["update:name","update:price","update:quantity"],setup:(e,{emit:t})=>({updateName:e=>t("update:name",e),updatePrice:e=>t("update:price",e),updateQuantity:e=>t("update:quantity",e)})},W={class:"row"},K={class:"col-md-6 mb-3"},X=l("label",{for:"item-name"},"Name",-1),Z={class:"col-md-3 mb-3"},ee=l("label",{for:"item-price"},"Price",-1),te={class:"col-md-3 mb-3"},ne=l("label",{for:"item-quantity"},"Quantity",-1);J.render=function(e,t,n,s,a,c){return o(),r("div",W,[l("div",K,[X,l("input",{value:n.name,onInput:t[1]||(t[1]=e=>s.updateName(e.target.value)),type:"text",class:"form-control",id:"item-name"},null,40,["value"])]),l("div",Z,[ee,l("input",{value:n.price,onInput:t[2]||(t[2]=e=>s.updatePrice(e.target.value)),type:"number",class:"form-control",id:"item-price"},null,40,["value"])]),l("div",te,[ne,l("input",{value:n.quantity,onInput:t[3]||(t[3]=e=>s.updateQuantity(e.target.value)),type:"number",class:"form-control",id:"item-quantity"},null,40,["value"])])])};const se={async setup(){const e=await fetch("https://api.exchangeratesapi.io/latest");return{rates:(await e.json()).rates}}},ae={class:"list-group"},oe={class:"list-group-item"},re={class:"list-group-item"};let le;se.render=function(e,t,n,s,a,i){return o(),r("ul",ae,[l("li",oe,"Change to USD: "+c(s.rates.USD),1),l("li",re,"Change to GBP: "+c(s.rates.GBP),1)])};const ce={};var ie=h({name:"Spinner",render:()=>g("div",{class:"spinner-border",role:"status"},[g("span",{class:"sr-only"},"Loading...")])}),ue=P({loader:()=>function(e,t){if(!t)return e();if(void 0===le){const e=document.createElement("link").relList;le=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in ce)return;ce[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":le,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise((e=>{s.addEventListener("load",e)})):void 0}))).then((()=>e()))}((()=>__import__("./Payment.62a11b25.js")),["./assets/Payment.62a11b25.js","./assets/vendor.ebb8d7af.js"]),loadingComponent:ie,delay:0,onError(e,t,n,s){console.log("Retrying to load component",e),t()}});const de={name:"Username",setup:()=>({label:"Username"})},me={class:"mb-3"},pe=l("label",{for:"username"},"Default label",-1),fe=l("div",{class:"input-group"},[l("div",{class:"input-group-prepend"}),l("input",{type:"text",class:"form-control",id:"username",placeholder:"Username"}),l("div",{class:"invalid-feedback",style:{width:"100%"}}," Your username is required. ")],-1);de.render=function(e,t,n,s,a,l){return o(),r("div",me,[x(e.$slots,"default",{label:s.label},(()=>[pe])),fe])};const ye={name:"Cart",components:{Coupon:F,Item:J,Exchange:se,AsyncPayment:ue,Spinner:ie,Username:de},setup(){console.log("setup");const{product:t,secondName:n,secondPrice:s,secondQuantity:a,total:o,coupon:r,setCoupon:l}=(()=>{const e=w({firstName:"First Product",firstPrice:10,firstQuantity:1}),t=y("Second Product"),n=y(20),s=y(2),a=C((()=>(e.firstPrice*e.firstQuantity+n.value*s.value)*(100-o.value)/100)),o=y(10);return{product:e,secondName:t,secondPrice:n,secondQuantity:s,total:a,coupon:o,setCoupon:e=>o.value=e}})();k((()=>console.log(`watchEffect: ${t.firstName} ${t.firstPrice}x${t.firstQuantity}`))),U([n],(()=>console.log(`watch: ${n.value} ${s.value}x${a.value}`))),m((()=>{console.log("mounted")})),$((()=>console.log("updated"))),N((()=>console.log("onunmounted")));const c=y(null);return Q((e=>(c.value=e,!0))),e(e({},E(t)),{secondName:n,secondPrice:s,secondQuantity:a,total:o,coupon:r,setCoupon:l,error:c})}},be={class:"row"},ve={class:"col-md-4 order-md-2 mb-4"},he=l("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[l("span",{class:"text-muted"},"Cart")],-1),ge={class:"list-group mb-3"},Pe={class:"list-group-item d-flex justify-content-between lh-condensed"},xe={class:"my-0"},we={class:"text-muted"},Ce={class:"list-group-item d-flex justify-content-between lh-condensed"},ke={class:"my-0"},Ue={class:"text-muted"},$e={class:"list-group-item d-flex justify-content-between"},Ne=l("span",null,"Total (USD)",-1),Qe={key:0},Ee={class:"col-md-8 order-md-1"},qe=l("h4",{class:"mb-3"},"Items",-1),Se={class:"needs-validation"},je={class:"row"},_e={class:"col-md-6 mb-3"},Le=l("label",{for:"second-item-name"},"Name",-1),Re={class:"col-md-3 mb-3"},Ie=l("label",{for:"second-item-price"},"Price",-1),Me={class:"col-md-3 mb-3"},Ae=l("label",{for:"second-item-quantity"},"Quantity",-1),De={for:"username"},Oe=l("h4",{class:"mb-3"},"Payment",-1),Ve=l("hr",{class:"mb-4"},null,-1),Be=u("Continue to checkout");ye.render=function(e,t,n,s,a,i){const u=p("Coupon"),d=p("Exchange"),m=p("Spinner"),f=p("Item"),y=p("Username"),h=p("AsyncPayment"),g=p("router-link");return o(),r("div",be,[l("div",ve,[he,l("ul",ge,[l("li",Pe,[l("div",null,[l("h6",xe,c(e.firstName),1)]),l("span",we,"$"+c(e.firstPrice*e.firstQuantity),1)]),l("li",Ce,[l("div",null,[l("h6",ke,c(s.secondName),1)]),l("span",Ue,"$"+c(s.secondPrice*s.secondQuantity),1)]),l("li",$e,[Ne,l("strong",null,"$"+c(s.total),1)])]),l(u,{percent:10,onRedeem:s.setCoupon},null,8,["onRedeem"]),s.error?(o(),r("div",Qe,c(s.error),1)):(o(),r(q,{key:1},{default:S((()=>[l(d)])),fallback:S((()=>[l(m)])),_:1}))]),l("div",Ee,[qe,l("form",Se,[l(f,{name:e.firstName,"onUpdate:name":t[1]||(t[1]=t=>e.firstName=t),price:e.firstPrice,"onUpdate:price":t[2]||(t[2]=t=>e.firstPrice=t),quantity:e.firstQuantity,"onUpdate:quantity":t[3]||(t[3]=t=>e.firstQuantity=t)},null,8,["name","price","quantity"]),l("div",je,[l("div",_e,[Le,b(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.secondName=e),type:"text",class:"form-control",id:"second-item-name"},null,512),[[v,s.secondName]])]),l("div",Re,[Ie,b(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.secondPrice=e),type:"number",class:"form-control",id:"second-item-price"},null,512),[[v,s.secondPrice]])]),l("div",Me,[Ae,b(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.secondQuantity=e),type:"number",class:"form-control",id:"second-item-quantity"},null,512),[[v,s.secondQuantity]])])])]),l(y,null,{default:S((({label:e})=>[l("label",De,c(e),1)])),_:1}),Oe,l(h),Ve,l(g,{to:"/checkout",class:"btn btn-primary btn-lg btn-block"},{default:S((()=>[Be])),_:1})])])};const Te={name:"Checkout",setup(){const{path:e}=j();return{path:e}}},Ye={class:"row"},Fe={class:"col-md-8 order-md-1"},He=l("h4",{class:"mb-3"},"Checkout",-1),Ge=u("Back to cart");Te.render=function(e,t,n,s,a,i){const u=p("router-link");return o(),r("div",Ye,[l("div",Fe,[He,l("p",null,c(s.path),1),l(u,{to:"/",class:"btn btn-primary btn-lg btn-block"},{default:S((()=>[Ge])),_:1})])])};var ze=_({history:L(),routes:[{path:"/",name:"cart",component:ye},{path:"/checkout",name:"checkout",component:Te}]}),Je={beforeMount(e,t,n,s){console.log(`directive: value - ${t.value}, argument - ${t.arg}, modifiers - ${JSON.stringify(t.modifiers)}`),e.innerHTML='<span class="input-group-text">@</span>'},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){}};class We extends HTMLElement{connectedCallback(){this.innerText="blacksonic"}}customElements.define("x-username",We);const Ke=R(T);Ke.config.isCustomElement=e=>/^x-/.test(e),Ke.use(Y).use(ze),Ke.directive("AtSign",Je),Ke.mount("#app");
