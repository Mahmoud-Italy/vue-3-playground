var e=Object.assign;import{p as t,v as n,i as s,u as a,o,c as r,a as l,t as c,T as i,b as u,F as d,d as m,r as p,e as f,f as y,w as b,g as v,h,j as g,k as P,l as x,m as w,n as C,q as k,s as U,x as $,y as N,z as Q,A as E,B as q,S,C as j,D as _,E as L,G as R,H as I}from"./vendor.620635d3.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const s=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const r=new URL(e,s);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),a(c)},onload(){n(self[t].moduleMap[r]),a(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("assets/");const M=Symbol("version");const A={name:"Header",setup(){const{state:e}=a();return{version:s(M),state:e}}},D={class:"py-5 text-center"},O=l("img",{class:"d-block mx-auto mb-4",src:"./assets/logo.3b714202.png",alt:"",width:"72",height:"72"},null,-1),V={class:"lead"},B={class:"mb-1"},H=l("x-username",null,null,-1);A.render=function(e,t,n,s,a,m){return o(),r(d,null,[l("div",D,[O,l("h2",null,"Vue "+c(s.version)+" Playground",1),l("p",V," Below is an example form built with the Vue "+c(s.version)+" Composition API. ",1)]),(o(),r(i,{to:"#footer"},[l("p",B,[u("Â© "+c(s.state.year)+" ",1),H])]))],64)};const T={name:"App",components:{Header:A},setup(){const{dispatch:e}=a();t(M,n),m((()=>{e("onSetYear",(new Date).getFullYear())}))}};T.render=function(e,t,n,s,a,c){const i=p("Header"),u=p("router-view");return o(),r(d,null,[l(i),l(u)],64)};var Y=f({state:{year:"1970"},actions:{onSetYear:({commit:e},t)=>{e("setYear",t)}},mutations:{setYear:(e,t)=>{e.year=t}}});const F={name:"Coupon",props:["percent"],emits:["redeem"],setup(e,{emit:t}){const n=y(e.percent);return{percent:n,useCoupon:()=>t("redeem",n.value)}}},G={class:"card p-2"},z={class:"input-group"},J={class:"input-group-append"};F.render=function(e,t,n,s,a,c){return o(),r("form",G,[l("div",z,[b(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.percent=e),type:"text",class:"form-control",placeholder:"Promo code"},null,512),[[v,s.percent]]),l("div",J,[l("button",{onClick:t[2]||(t[2]=(...e)=>s.useCoupon&&s.useCoupon(...e)),type:"button",class:"btn btn-secondary"},"Redeem")])])])};const W={name:"Item",props:["name","price","quantity"],emits:["update:name","update:price","update:quantity"],setup:(e,{emit:t})=>({updateName:e=>t("update:name",e),updatePrice:e=>t("update:price",e),updateQuantity:e=>t("update:quantity",e)})},K={class:"row"},X={class:"col-md-6 mb-3"},Z=l("label",{for:"item-name"},"Name",-1),ee={class:"col-md-3 mb-3"},te=l("label",{for:"item-price"},"Price",-1),ne={class:"col-md-3 mb-3"},se=l("label",{for:"item-quantity"},"Quantity",-1);W.render=function(e,t,n,s,a,c){return o(),r("div",K,[l("div",X,[Z,l("input",{value:n.name,onInput:t[1]||(t[1]=e=>s.updateName(e.target.value)),type:"text",class:"form-control",id:"item-name"},null,40,["value"])]),l("div",ee,[te,l("input",{value:n.price,onInput:t[2]||(t[2]=e=>s.updatePrice(e.target.value)),type:"number",class:"form-control",id:"item-price"},null,40,["value"])]),l("div",ne,[se,l("input",{value:n.quantity,onInput:t[3]||(t[3]=e=>s.updateQuantity(e.target.value)),type:"number",class:"form-control",id:"item-quantity"},null,40,["value"])])])};const ae={async setup(){const e=await fetch("https://api.exchangeratesapi.io/latest");return{rates:(await e.json()).rates}}},oe={class:"list-group"},re={class:"list-group-item"},le={class:"list-group-item"};let ce;ae.render=function(e,t,n,s,a,i){return o(),r("ul",oe,[l("li",re,"Change to USD: "+c(s.rates.USD),1),l("li",le,"Change to GBP: "+c(s.rates.GBP),1)])};const ie={};var ue=h({name:"Spinner",render:()=>g("div",{class:"spinner-border",role:"status"},[g("span",{class:"sr-only"},"Loading...")])}),de=P({loader:()=>function(e,t){if(!t)return e();if(void 0===ce){const e=document.createElement("link").relList;ce=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in ie)return;ie[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":ce,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise((e=>{s.addEventListener("load",e)})):void 0}))).then((()=>e()))}((()=>__import__("./Payment.e5387633.js")),["./assets/Payment.e5387633.js","./assets/vendor.620635d3.js"]),loadingComponent:ue,delay:0,onError(e,t,n,s){console.log("Retrying to load component",e),t()}});const me={name:"Username",setup:()=>({label:"Username"})},pe={class:"mb-3"},fe=l("label",{for:"username"},"Default label",-1),ye={class:"input-group"},be={class:"input-group-prepend"},ve=l("input",{type:"text",class:"form-control",id:"username",placeholder:"Username"},null,-1),he=l("div",{class:"invalid-feedback",style:{width:"100%"}}," Your username is required. ",-1);me.render=function(e,t,n,s,a,c){const i=x("at-sign");return o(),r("div",pe,[w(e.$slots,"default",{label:s.label},(()=>[fe])),l("div",ye,[b(l("div",be,null,512),[[i,s.label,"foo",{a:!0,b:!0}]]),ve,he])])};const ge={name:"Cart",components:{Coupon:F,Item:W,Exchange:ae,AsyncPayment:de,Spinner:ue,Username:me},setup(){console.log("setup");const{product:t,secondName:n,secondPrice:s,secondQuantity:a,total:o,coupon:r,setCoupon:l}=(()=>{const e=C({firstName:"First Product",firstPrice:10,firstQuantity:1}),t=y("Second Product"),n=y(20),s=y(2),a=k((()=>(e.firstPrice*e.firstQuantity+n.value*s.value)*(100-o.value)/100)),o=y(10);return{product:e,secondName:t,secondPrice:n,secondQuantity:s,total:a,coupon:o,setCoupon:e=>o.value=e}})();U((()=>console.log(`watchEffect: ${t.firstName} ${t.firstPrice}x${t.firstQuantity}`))),$([n],(()=>console.log(`watch: ${n.value} ${s.value}x${a.value}`))),m((()=>{console.log("mounted")})),N((()=>console.log("updated"))),Q((()=>console.log("onunmounted")));const c=y(null);return E((e=>(c.value=e,!0))),e(e({},q(t)),{secondName:n,secondPrice:s,secondQuantity:a,total:o,coupon:r,setCoupon:l,error:c})}},Pe={class:"row"},xe={class:"col-md-4 order-md-2 mb-4"},we=l("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[l("span",{class:"text-muted"},"Cart")],-1),Ce={class:"list-group mb-3"},ke={class:"list-group-item d-flex justify-content-between lh-condensed"},Ue={class:"my-0"},$e={class:"text-muted"},Ne={class:"list-group-item d-flex justify-content-between lh-condensed"},Qe={class:"my-0"},Ee={class:"text-muted"},qe={class:"list-group-item d-flex justify-content-between"},Se=l("span",null,"Total (USD)",-1),je={key:0},_e={class:"col-md-8 order-md-1"},Le=l("h4",{class:"mb-3"},"Items",-1),Re={class:"needs-validation"},Ie={class:"row"},Me={class:"col-md-6 mb-3"},Ae=l("label",{for:"second-item-name"},"Name",-1),De={class:"col-md-3 mb-3"},Oe=l("label",{for:"second-item-price"},"Price",-1),Ve={class:"col-md-3 mb-3"},Be=l("label",{for:"second-item-quantity"},"Quantity",-1),He={for:"username"},Te=l("h4",{class:"mb-3"},"Payment",-1),Ye=l("hr",{class:"mb-4"},null,-1),Fe=u("Continue to checkout");ge.render=function(e,t,n,s,a,i){const u=p("Coupon"),d=p("Exchange"),m=p("Spinner"),f=p("Item"),y=p("Username"),h=p("AsyncPayment"),g=p("router-link");return o(),r("div",Pe,[l("div",xe,[we,l("ul",Ce,[l("li",ke,[l("div",null,[l("h6",Ue,c(e.firstName),1)]),l("span",$e,"$"+c(e.firstPrice*e.firstQuantity),1)]),l("li",Ne,[l("div",null,[l("h6",Qe,c(s.secondName),1)]),l("span",Ee,"$"+c(s.secondPrice*s.secondQuantity),1)]),l("li",qe,[Se,l("strong",null,"$"+c(s.total),1)])]),l(u,{percent:10,onRedeem:s.setCoupon},null,8,["onRedeem"]),s.error?(o(),r("div",je,c(s.error),1)):(o(),r(S,{key:1},{default:j((()=>[l(d)])),fallback:j((()=>[l(m)])),_:1}))]),l("div",_e,[Le,l("form",Re,[l(f,{name:e.firstName,"onUpdate:name":t[1]||(t[1]=t=>e.firstName=t),price:e.firstPrice,"onUpdate:price":t[2]||(t[2]=t=>e.firstPrice=t),quantity:e.firstQuantity,"onUpdate:quantity":t[3]||(t[3]=t=>e.firstQuantity=t)},null,8,["name","price","quantity"]),l("div",Ie,[l("div",Me,[Ae,b(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.secondName=e),type:"text",class:"form-control",id:"second-item-name"},null,512),[[v,s.secondName]])]),l("div",De,[Oe,b(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.secondPrice=e),type:"number",class:"form-control",id:"second-item-price"},null,512),[[v,s.secondPrice]])]),l("div",Ve,[Be,b(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.secondQuantity=e),type:"number",class:"form-control",id:"second-item-quantity"},null,512),[[v,s.secondQuantity]])])])]),l(y,null,{default:j((({label:e})=>[l("label",He,c(e),1)])),_:1}),Te,l(h),Ye,l(g,{to:"/checkout",class:"btn btn-primary btn-lg btn-block"},{default:j((()=>[Fe])),_:1})])])};const Ge={name:"Checkout",setup(){const{path:e}=_();return{path:e}}},ze={class:"row"},Je={class:"col-md-8 order-md-1"},We=l("h4",{class:"mb-3"},"Checkout",-1),Ke=u("Back to cart");Ge.render=function(e,t,n,s,a,i){const u=p("router-link");return o(),r("div",ze,[l("div",Je,[We,l("p",null,c(s.path),1),l(u,{to:"/",class:"btn btn-primary btn-lg btn-block"},{default:j((()=>[Ke])),_:1})])])};var Xe=L({history:R(),routes:[{path:"/",name:"cart",component:ge},{path:"/checkout",name:"checkout",component:Ge}]}),Ze={beforeMount(e,t,n,s){console.log(`directive: value - ${t.value}, argument - ${t.arg}, modifiers - ${JSON.stringify(t.modifiers)}`),e.innerHTML='<span class="input-group-text">@</span>'},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){}};class et extends HTMLElement{connectedCallback(){this.innerText="blacksonic"}}customElements.define("x-username",et);const tt=I(T);tt.config.isCustomElement=e=>/^x-/.test(e),tt.use(Y).use(Xe),tt.directive("AtSign",Ze),tt.mount("#app");
