var e=Object.assign;import{i as t,p as n,v as s,d as a,u as o,o as r,c as l,a as c,t as i,T as u,b as d,F as m,e as p,r as f,f as y,g as b,w as v,h,j as g,k as P,l as x,m as w,n as C,q as k,s as U,x as $,y as E,z as N,A as Q,S as q,B as S,C as j,D as L,E as _,G as R}from"./vendor.216ae360.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const s=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const r=new URL(e,s);if(self[t].moduleMap[r])return n(self[t].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),a(c)},onload(){n(self[t].moduleMap[r]),a(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("assets/");const I=Symbol("version");const M=a({name:"Header",setup(){const{state:e}=o();return{version:t(I),state:e}}}),A={class:"py-5 text-center"},D=c("img",{class:"d-block mx-auto mb-4",src:"./assets/logo.03d6d6da.png",alt:"",width:"72",height:"72"},null,-1),O={class:"lead"},V={class:"mb-1"},B=c("x-username",null,null,-1);M.render=function(e,t,n,s,a,o){return r(),l(m,null,[c("div",A,[D,c("h2",null,"Vue "+i(e.version)+" Playground",1),c("p",O," Below is an example form built with the Vue "+i(e.version)+" Composition API. ",1)]),(r(),l(u,{to:"#footer"},[c("p",V,[d("Â© "+i(e.state.year)+" ",1),B])]))],64)};const T=a({name:"App",components:{Header:M},setup(){const{dispatch:e}=o();n(I,s),p((()=>{e("onSetYear",(new Date).getFullYear())}))}});T.render=function(e,t,n,s,a,o){const i=f("Header"),u=f("router-view");return r(),l(m,null,[c(i),c(u)],64)};var Y=y({state:{year:"1970"},actions:{onSetYear:({commit:e},t)=>{e("setYear",t)}},mutations:{setYear:(e,t)=>{e.year=t}}});const F=a({name:"Coupon",props:["percent"],emits:["redeem"],setup(e,{emit:t}){const n=b(e.percent);return{percent:n,useCoupon:()=>t("redeem",n.value)}}}),H={class:"card p-2"},G={class:"input-group"},z={class:"input-group-append"};F.render=function(e,t,n,s,a,o){return r(),l("form",H,[c("div",G,[v(c("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.percent=t),type:"text",class:"form-control",placeholder:"Promo code"},null,512),[[h,e.percent]]),c("div",z,[c("button",{onClick:t[2]||(t[2]=(...t)=>e.useCoupon&&e.useCoupon(...t)),type:"button",class:"btn btn-secondary"},"Redeem")])])])};const J=a({name:"Item",props:["name","price","quantity"],emits:["update:name","update:price","update:quantity"],setup:(e,{emit:t})=>({updateName:e=>t("update:name",e),updatePrice:e=>t("update:price",e),updateQuantity:e=>t("update:quantity",e)})}),W={class:"row"},K={class:"col-md-6 mb-3"},X=c("label",{for:"item-name"},"Name",-1),Z={class:"col-md-3 mb-3"},ee=c("label",{for:"item-price"},"Price",-1),te={class:"col-md-3 mb-3"},ne=c("label",{for:"item-quantity"},"Quantity",-1);J.render=function(e,t,n,s,a,o){return r(),l("div",W,[c("div",K,[X,c("input",{value:e.name,onInput:t[1]||(t[1]=t=>e.updateName(t.target.value)),type:"text",class:"form-control",id:"item-name"},null,40,["value"])]),c("div",Z,[ee,c("input",{value:e.price,onInput:t[2]||(t[2]=t=>e.updatePrice(t.target.value)),type:"number",class:"form-control",id:"item-price"},null,40,["value"])]),c("div",te,[ne,c("input",{value:e.quantity,onInput:t[3]||(t[3]=t=>e.updateQuantity(t.target.value)),type:"number",class:"form-control",id:"item-quantity"},null,40,["value"])])])};const se=a({async setup(){const e=await fetch("https://api.exchangeratesapi.io/latest");return{rates:(await e.json()).rates}}}),ae={class:"list-group"},oe={class:"list-group-item"},re={class:"list-group-item"};let le;se.render=function(e,t,n,s,a,o){return r(),l("ul",ae,[c("li",oe,"Change to USD: "+i(e.rates.USD),1),c("li",re,"Change to GBP: "+i(e.rates.GBP),1)])};const ce={};var ie=a({name:"Spinner",render:()=>g("div",{class:"spinner-border",role:"status"},[g("span",{class:"sr-only"},"Loading...")])}),ue=P({loader:()=>function(e,t){if(!t)return e();if(void 0===le){const e=document.createElement("link").relList;le=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in ce)return;ce[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":le,t||(s.as="script",s.crossOrigin=""),s.href=e,document.head.appendChild(s),t?new Promise(((e,t)=>{s.addEventListener("load",e),s.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>__import__("./Payment.ff1d0021.js")),["./assets/Payment.ff1d0021.js","./assets/vendor.216ae360.js"]),loadingComponent:ie,delay:0,onError(e,t,n,s){console.log("Retrying to load component",e),t()}});const de=a({name:"Username",setup:()=>({label:"Username"})}),me={class:"mb-3"},pe=c("label",{for:"username"},"Default label",-1),fe=c("div",{class:"input-group"},[c("div",{class:"input-group-prepend"}),c("input",{type:"text",class:"form-control",id:"username",placeholder:"Username"}),c("div",{class:"invalid-feedback",style:{width:"100%"}}," Your username is required. ")],-1);de.render=function(e,t,n,s,a,o){return r(),l("div",me,[x(e.$slots,"default",{label:e.label},(()=>[pe])),fe])};const ye=a({name:"Cart",components:{Coupon:F,Item:J,Exchange:se,AsyncPayment:ue,Spinner:ie,Username:de},setup(){console.log("setup");const{product:t,secondName:n,secondPrice:s,secondQuantity:a,total:o,coupon:r,setCoupon:l}=(()=>{const e=w({firstName:"First Product",firstPrice:10,firstQuantity:1}),t=b("Second Product"),n=b(20),s=b(2),a=C((()=>(e.firstPrice*e.firstQuantity+n.value*s.value)*(100-o.value)/100)),o=b(10);return{product:e,secondName:t,secondPrice:n,secondQuantity:s,total:a,coupon:o,setCoupon:e=>o.value=e}})();k((()=>console.log(`watchEffect: ${t.firstName} ${t.firstPrice}x${t.firstQuantity}`))),U([n],(()=>console.log(`watch: ${n.value} ${s.value}x${a.value}`))),p((()=>{console.log("mounted")})),$((()=>console.log("updated"))),E((()=>console.log("onunmounted")));const c=b(null);return N((e=>(c.value=e,!0))),e(e({},Q(t)),{secondName:n,secondPrice:s,secondQuantity:a,total:o,coupon:r,setCoupon:l,error:c})}}),be={class:"row"},ve={class:"col-md-4 order-md-2 mb-4"},he=c("h4",{class:"d-flex justify-content-between align-items-center mb-3"},[c("span",{class:"text-muted"},"Cart")],-1),ge={class:"list-group mb-3"},Pe={class:"list-group-item d-flex justify-content-between lh-condensed"},xe={class:"my-0"},we={class:"text-muted"},Ce={class:"list-group-item d-flex justify-content-between lh-condensed"},ke={class:"my-0"},Ue={class:"text-muted"},$e={class:"list-group-item d-flex justify-content-between"},Ee=c("span",null,"Total (USD)",-1),Ne={key:0},Qe={class:"col-md-8 order-md-1"},qe=c("h4",{class:"mb-3"},"Items",-1),Se={class:"needs-validation"},je={class:"row"},Le={class:"col-md-6 mb-3"},_e=c("label",{for:"second-item-name"},"Name",-1),Re={class:"col-md-3 mb-3"},Ie=c("label",{for:"second-item-price"},"Price",-1),Me={class:"col-md-3 mb-3"},Ae=c("label",{for:"second-item-quantity"},"Quantity",-1),De={for:"username"},Oe=c("h4",{class:"mb-3"},"Payment",-1),Ve=c("hr",{class:"mb-4"},null,-1),Be=d("Continue to checkout");ye.render=function(e,t,n,s,a,o){const u=f("Coupon"),d=f("Exchange"),m=f("Spinner"),p=f("Item"),y=f("Username"),b=f("AsyncPayment"),g=f("router-link");return r(),l("div",be,[c("div",ve,[he,c("ul",ge,[c("li",Pe,[c("div",null,[c("h6",xe,i(e.firstName),1)]),c("span",we,"$"+i(e.firstPrice*e.firstQuantity),1)]),c("li",Ce,[c("div",null,[c("h6",ke,i(e.secondName),1)]),c("span",Ue,"$"+i(e.secondPrice*e.secondQuantity),1)]),c("li",$e,[Ee,c("strong",null,"$"+i(e.total),1)])]),c(u,{percent:10,onRedeem:e.setCoupon},null,8,["onRedeem"]),e.error?(r(),l("div",Ne,i(e.error),1)):(r(),l(q,{key:1},{default:S((()=>[c(d)])),fallback:S((()=>[c(m)])),_:1}))]),c("div",Qe,[qe,c("form",Se,[c(p,{name:e.firstName,"onUpdate:name":t[1]||(t[1]=t=>e.firstName=t),price:e.firstPrice,"onUpdate:price":t[2]||(t[2]=t=>e.firstPrice=t),quantity:e.firstQuantity,"onUpdate:quantity":t[3]||(t[3]=t=>e.firstQuantity=t)},null,8,["name","price","quantity"]),c("div",je,[c("div",Le,[_e,v(c("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.secondName=t),type:"text",class:"form-control",id:"second-item-name"},null,512),[[h,e.secondName]])]),c("div",Re,[Ie,v(c("input",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.secondPrice=t),type:"number",class:"form-control",id:"second-item-price"},null,512),[[h,e.secondPrice]])]),c("div",Me,[Ae,v(c("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.secondQuantity=t),type:"number",class:"form-control",id:"second-item-quantity"},null,512),[[h,e.secondQuantity]])])])]),c(y,null,{default:S((({label:e})=>[c("label",De,i(e),1)])),_:1}),Oe,c(b),Ve,c(g,{to:"/checkout",class:"btn btn-primary btn-lg btn-block"},{default:S((()=>[Be])),_:1})])])};const Te=a({name:"Checkout",setup(){const{path:e}=j();return{path:e}}}),Ye={class:"row"},Fe={class:"col-md-8 order-md-1"},He=c("h4",{class:"mb-3"},"Checkout",-1),Ge=d("Back to cart");Te.render=function(e,t,n,s,a,o){const u=f("router-link");return r(),l("div",Ye,[c("div",Fe,[He,c("p",null,i(e.path),1),c(u,{to:"/",class:"btn btn-primary btn-lg btn-block"},{default:S((()=>[Ge])),_:1})])])};var ze=L({history:_(),routes:[{path:"/",name:"cart",component:ye},{path:"/checkout",name:"checkout",component:Te}]}),Je={beforeMount(e,t,n,s){console.log(`directive: value - ${t.value}, argument - ${t.arg}, modifiers - ${JSON.stringify(t.modifiers)}`),e.innerHTML='<span class="input-group-text">@</span>'},mounted(){},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){}};class We extends HTMLElement{connectedCallback(){this.innerText="blacksonic"}}customElements.define("x-username",We);const Ke=R(T);Ke.config.isCustomElement=e=>/^x-/.test(e),Ke.use(Y).use(ze),Ke.directive("AtSign",Je),Ke.mount("#app");
